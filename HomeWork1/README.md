# Сервис для бэктестирования стратегий и индикаторов на пользовательских данных

## Подготовка данных
1) Необходимы данные формата *.csv* формата:
 ``` 
Date,Open,High,Low,Close,Adj Close,Volume
2021-01-04,133.52000427246094,133.61000061035156,126.76000213623047,129.41000366210938,126.6834487915039,143301900
2021-01-05,128.88999938964844,131.74000549316406,128.42999267578125,131.00999450683594,128.24972534179688,97664900
2021-01-06,127.72000122070312,131.0500030517578,126.37999725341797,126.5999984741211,123.93264770507812,155088000
2021-01-07,128.36000061035156,131.6300048828125,127.86000061035156,130.9199981689453,128.16162109375,109578200
2021-01-08,132.42999267578125,132.6300048828125,130.22999572753906,132.0500030517578,129.267822265625,105158200
2021-01-11,129.19000244140625,130.1699981689453,128.5,128.97999572753906,126.26251220703125,100384500
2021-01-12,128.5,129.69000244140625,126.86000061035156,128.8000030517578,126.08628845214844,91951100
2021-01-13,128.75999450683594,131.4499969482422,128.49000549316406,130.88999938964844,128.13223266601562,88636800
2021-01-14,130.8000030517578,131.0,128.75999450683594,128.91000366210938,126.19397735595703,90221800 
```
2) Положить фаил в папку */data*

## Написание индикатора

Для написания индикатора унаследуйтесь от класса **Indicator**
Вам доступны:

```
   is_ready() - метод, который возвращает готовность индикатора
   lines - содержит в себе значения индикатора
   next() - метод для расчета следующего значения
   get_price(...) - метод для получения текущей цены свеци по типу (Close, High, Open, Low)
```
Для написания своего индикатора необходимо переопределить **lines** и **next**

 PS: Пример написание своего индикатора можно посмотреть в example.indicator
 
## Написание стратегии

Для написания стратегии унаследуйтесь от класса **Stategy**
Вам доступны:

```
   position_status - статус позиции ( Long, Short, None)
   in_position() - метод который возвращает в позиции ли вы взависимости от статуса
   next() - метод для принятия решения на каждой свечки ( отправить\ отменить ордер)
   get_price(...) - метод для получения текущей цены свеци по типу (Close, High, Open, Low)
   
   send_market_order_buy(...) - отправляет маркет ордер на покупку и возвращает вам order
   send_market_order_sell(...) - отправляет  маркет ордер на продажу и возвращает вам order
    
   send_limit_order_buy(...) - отправляет лимитный ордер на покупку и возвращает вам order
   send_limit_order_sell(...) - отправляет лимитный ордер на продажу и возвращает вам order
   
   send_stop_order_buy(...) - отправляет стоп ордер на покупку и возвращает вам order
   send_stop_order_sell(...) - отправляет стоп ордер на продажу и возвращает вам order
   
   send_stop_limit_order_buy(...) - отправляет стоп-лимитный ордер на покупку и возвращает вам order
   send_stop_limit_order_sell(...) - отправляет стоп-kbvbnysq ордер на продажу и возвращает вам order
   
   order_is_completed(...) - возвращает успешно исполнился ли ордер или нет
   cancel_order(...) - отменяет ордер, возвращает true если его удалось отменить
```
Для написания своего индикатора необходимо добавить индекатор(ы) и переопределить **next**

PS: Пример написание своей стратегии можно посмотреть в example.staregy

## Запуск бектеста

1) В config добавляем параметры, необходимые стратегии и бектесту
```
start_cach - начальный капитал
data__name - название файла с данными
start_date - дата начала бектеста в формате
end_date - дата конца бектеста в формате
format_date - формат даты ( для дней будет '%Y-%m-%d')
```
2) В start в команду **run** передать свою стратегию